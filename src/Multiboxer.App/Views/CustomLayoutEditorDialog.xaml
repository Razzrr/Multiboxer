<Window x:Class="Multiboxer.App.Views.CustomLayoutEditorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Custom Layout Editor"
        Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        Background="{StaticResource BackgroundBrush}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Layout List (Left Panel) -->
        <StackPanel Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" Margin="0,0,16,0">
            <TextBlock Text="Custom Layouts" FontWeight="SemiBold" Margin="0,0,0,8" />
            <ListBox x:Name="LayoutListBox"
                     Height="300"
                     SelectionChanged="LayoutListBox_SelectionChanged"
                     DisplayMemberPath="Name" />

            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                <Button Content="New" Padding="12,4" Click="NewLayout_Click" />
                <Button Content="Delete" Padding="12,4" Margin="8,0,0,0" Click="DeleteLayout_Click" />
            </StackPanel>

            <!-- Quick Presets -->
            <TextBlock Text="Quick Presets" FontWeight="SemiBold" Margin="0,24,0,8" />
            <Button Content="Create Grid (2x2)" Padding="8,4" Margin="0,0,0,4" Click="CreateGrid2x2_Click" />
            <Button Content="Create Grid (3x3)" Padding="8,4" Margin="0,0,0,4" Click="CreateGrid3x3_Click" />
            <Button Content="Create PiP (3 windows)" Padding="8,4" Margin="0,0,0,4" Click="CreatePiP3_Click" />
            <Button Content="Create PiP (5 windows)" Padding="8,4" Click="CreatePiP5_Click" />
        </StackPanel>

        <!-- Layout Details (Right Panel) -->
        <GroupBox Grid.Row="0" Grid.Column="1" Header="Layout Settings" Margin="0,0,0,16">
            <StackPanel Margin="8">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBlock Text="Name:" Width="80" VerticalAlignment="Center" />
                    <TextBox x:Name="LayoutNameTextBox" Width="200" />
                </StackPanel>
            </StackPanel>
        </GroupBox>

        <!-- Region Editor -->
        <GroupBox Grid.Row="1" Grid.Column="1" Header="Window Regions">
            <Grid Margin="8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Region Controls -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
                    <Button Content="Add Region" Padding="12,4" Click="AddRegion_Click" />
                    <Button Content="Remove Selected" Padding="12,4" Margin="8,0,0,0" Click="RemoveRegion_Click" />
                    <Separator Margin="16,0" />
                    <TextBlock Text="All values in percentages (0-100)" VerticalAlignment="Center" Foreground="Gray" />
                </StackPanel>

                <!-- Regions List -->
                <DataGrid x:Name="RegionsDataGrid"
                          Grid.Row="1"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          SelectionMode="Single">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Slot" Width="50" Binding="{Binding SlotIndex}" IsReadOnly="True" />
                        <DataGridTextColumn Header="X %" Width="70" Binding="{Binding X, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Y %" Width="70" Binding="{Binding Y, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Width %" Width="80" Binding="{Binding Width, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Height %" Width="80" Binding="{Binding Height, Mode=TwoWay}" />
                        <DataGridTextColumn Header="Description" Width="*" Binding="{Binding Description, Mode=TwoWay}" />
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </GroupBox>

        <!-- Buttons -->
        <StackPanel Grid.Row="2"
                    Grid.Column="0"
                    Grid.ColumnSpan="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="Save Layout"
                    Style="{StaticResource PrimaryButton}"
                    Width="120"
                    Click="SaveLayout_Click" />
            <Button Content="Close"
                    Width="100"
                    Margin="12,0,0,0"
                    Click="Close_Click" />
        </StackPanel>
    </Grid>
</Window>
