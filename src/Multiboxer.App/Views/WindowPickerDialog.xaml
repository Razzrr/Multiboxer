<Window x:Class="Multiboxer.App.Views.WindowPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Attach Window"
        Height="500" Width="650"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        Background="{StaticResource BackgroundBrush}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Filter -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Text="Filter:" VerticalAlignment="Center" Margin="0,0,8,0" />
            <TextBox x:Name="FilterTextBox"
                     Grid.Column="1"
                     TextChanged="FilterTextBox_TextChanged" />
            <Button x:Name="RefreshButton"
                    Grid.Column="2"
                    Content="Refresh"
                    Margin="8,0,0,0"
                    Padding="12,6"
                    Click="Refresh_Click" />
        </Grid>

        <!-- Window List -->
        <ListView x:Name="WindowsListView"
                  Grid.Row="1"
                  SelectionMode="Single"
                  SelectionChanged="WindowsListView_SelectionChanged"
                  MouseDoubleClick="WindowsListView_MouseDoubleClick">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Title" Width="280" DisplayMemberBinding="{Binding Title}" />
                    <GridViewColumn Header="Process" Width="120" DisplayMemberBinding="{Binding ProcessName}" />
                    <GridViewColumn Header="Class" Width="150" DisplayMemberBinding="{Binding ClassName}" />
                </GridView>
            </ListView.View>
        </ListView>

        <!-- Slot Selection -->
        <Grid Grid.Row="2" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBlock Text="Assign to Slot:" VerticalAlignment="Center" Margin="0,0,8,0" />
            <ComboBox x:Name="SlotComboBox"
                      Grid.Column="1"
                      Width="100"
                      SelectedIndex="0" />
            <TextBlock Grid.Column="2"
                       Text="(Or double-click a window to use next available slot)"
                       Foreground="Gray"
                       VerticalAlignment="Center"
                       Margin="16,0,0,0" />
        </Grid>

        <!-- Buttons -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button x:Name="AttachButton"
                    Content="Attach"
                    Style="{StaticResource PrimaryButton}"
                    Width="100"
                    IsEnabled="False"
                    Click="Attach_Click" />
            <Button x:Name="CancelButton"
                    Content="Cancel"
                    Width="100"
                    Margin="12,0,0,0"
                    Click="Cancel_Click" />
        </StackPanel>
    </Grid>
</Window>
